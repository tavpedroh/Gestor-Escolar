<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>Listar Cursos - JSON</title>
</head>
<body>
    <form class="menu" id="cursoForm" onsubmit="return false;">
        <label for="nomeCurso">Nome do curso:</label>
        <input type="text" id="nomeCurso" placeholder="Digite o nome do curso">
        <button type="submit" id="listarJsonBtn">Listar JSON</button>
    </form>
    <a href="/gestor_escolar/menu.jsp">Voltar para o menu.</a>

    <div id="resultado" class="json-output"></div>

    <script>
        document.getElementById('listarJsonBtn').addEventListener('click', function() {
            const filtro = document.getElementById('filtro').value;
            const nomeCurso = document.getElementById('nomeCurso').value.trim();

            if (!filtro && !nomeCurso) {
                document.getElementById('resultado').textContent = 'Selecione um filtro ou digite um nome.';
                return;
            }

            const params = new URLSearchParams();
            if (filtro) params.append('status', filtro);
            if (nomeCurso) params.append('nome', nomeCurso);

            fetch(`/api/cursos?${params.toString()}`)
                .then(response => response.json())
                .then(data => {
                    document.getElementById('resultado').textContent = JSON.stringify(data, null, 2);
                })
                .catch(error => {
                    document.getElementById('resultado').textContent = 'Erro ao buscar dados.';
                });
        });
    </script>
</body>
</html>